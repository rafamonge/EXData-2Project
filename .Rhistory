dir()
SCC <- readRDS("Source_Classification_Code.rds")
NEI <- readRDS("summarySCC_PM25.rds")
readFiles <- function(x)
{
if(!exists("NEI", envir=.GlobalEnv))
{
NEI <- readRDS("summarySCC_PM25.rds")
}
if(!exists("SCC", envir=.GlobalEnv))
{
SCC <- readRDS("Source_Classification_Code.rds")
}
}
readFiles <- function(x)
{
if(!exists("NEI", envir=.GlobalEnv))
{
NEI <- readRDS("summarySCC_PM25.rds")
message("loaded NEI")
}
if(!exists("SCC", envir=.GlobalEnv))
{
SCC <- readRDS("Source_Classification_Code.rds")
message("loaded SCC")
}
}
readFiles()
readFiles <- function(x)
{
if(!exists("NEI", envir=.GlobalEnv))
{
NEI <- readRDS("summarySCC_PM25.rds")
message("loaded NEI")
}
if(!exists("SCC", envir=.GlobalEnv))
{
SCC <- readRDS("Source_Classification_Code.rds")
message("loaded SCC")
}
}
readFiles()
str(NEI)
readFiles <- function(x)
{
#   if(!exists("NEI", envir=.GlobalEnv))
#   {
#     NEI <- readRDS("summarySCC_PM25.rds")
#     message("loaded NEI")
#   }
if(!exists("SCC", envir=.GlobalEnv))
{
SCC <<- readRDS("Source_Classification_Code.rds")
message("loaded SCC")
}
}
readFiles()
readFiles <- function(x)
{
if(!exists("NEI", envir=.GlobalEnv))
{
NEI <<- readRDS("summarySCC_PM25.rds")
message("loaded NEI")
}
if(!exists("SCC", envir=.GlobalEnv))
{
SCC <<- readRDS("Source_Classification_Code.rds")
message("loaded SCC")
}
}
readFiles()
head(NEI)
head(SCC)
str(NEI)
str(SCC)
?merge
readFiles <- function(x)
{
if(!exists("NEI", envir=.GlobalEnv))
{
NEI <<- readRDS("summarySCC_PM25.rds")
message("loaded NEI")
}
if(!exists("SCC", envir=.GlobalEnv))
{
SCC <<- readRDS("Source_Classification_Code.rds")
message("loaded SCC")
}
if(x){
#create the merged/prepared data source
PMData <<- merge(NEI,SCC, by="SCC")
message("created PMData")
}
}
readFiles(T)
str(SCC)
str(NEI)
s <- split(NEI,  NEI$year)
res<-  lapply(s, function(x) colSums(x[, c("Emissions")])
res<-  lapply(s, function(x) colSums(x[, c("Emissions")]))
lapply(s, function(x) mean(x$year))
lapply(s, function(x) sum(x$year))
res<-  lapply(s, function(x) sum(x$Emissions))
res
plot( NEI$year,NEI$Emissions,type="l")
plot( NEI$year,NEI$Emissions,type="l")
gc()
plot( NEI$year,NEI$Emissions,type="l")
names(res)
plot( names(res),res,type="l")
res
plot( names(res),res,type="l", xlab="year", ylab="Emissions")
source("ReadFiles.R")
function <- PrepareData(){
s <- split(NEI,  NEI$year)
res<-  lapply(s, function(x) sum(x$Emissions))
plot( names(res),res,type="l")
}
function <- PrepareData(){
s <- split(NEI,  NEI$year)
res <-  lapply(s, function(x) sum(x$Emissions))
plot( names(res),res,type="l")
}
PrepareData <- function (){
s <- split(NEI,  NEI$year)
res <-  lapply(s, function(x) sum(x$Emissions))
plot( names(res),res,type="l")
}
source("ReadFiles.R")
source("ReadFiles.R")
PlotInPng(PrepareData, "plot1.png")
paste("aaa ", "bb")
PlotInPng <- function(f, fileName){
png(filename = fileName)
f()
dev.off()
message(paste("printed to " filename))
}
PlotInPng <- function(f, fileName){
png(filename = fileName)
f()
dev.off()
message(paste("printed to ", filename))
}
class(names(res))
as.factor(names(res))
plot( as.factor(names(res)),res,type="l")
plot( names(res),res,type="l")
?barplot
barplot( names(res),res,type="l",xlab="Year", ylab="Emissions")
barplot( res,type="l",xlab="Year", ylab="Emissions")
res
barplot( res)
class( res)
res <-  sapply(s, function(x) sum(x$Emissions))
class( res)
res
barplot( res)
barplot( res,scientific = FALSE)
?barplot
barplot( res,xlab="year", ylab="emissions")
readFiles(F)
PlotInPng(plot1, "plot1.png")
plot1 <- function (){
s <- split(NEI,  NEI$year)
res <-  sapply(s, function(x) sum(x$Emissions))
barplot( res,xlab="year", ylab="emissions")
}
readFiles(F)
PlotInPng(plot1, "plot1.png")
source("ReadFiles.R")
readFiles(F)
PlotInPng(plot1, "plot1.png")
PlotInPng(plot1, "plot_1.png")
